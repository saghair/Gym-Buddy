<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Gym Buddy – Workouts</title>
  <link rel="stylesheet" href="assets/css/style.css" />
</head>
<body>
<header>
  <div class="navbar">
    <a href="index.html" class="brand">
      <div class="brand-pill">GB</div>
      <span>Gym Buddy</span>
    </a>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="build-workout.html">Build workout</a></li>
        <li><a href="workouts.html" class="active">Workouts</a></li>
        <li><a href="programs.html">Programs</a></li>
        <li><a href="challenges.html">Challenges</a></li>
        <li><a href="tools.html">Tools</a></li>
        <li><a href="profile.html">Profile</a></li>
      </ul>
    </nav>
  </div>
</header>

<main>
  <h1 class="page-title">Workout library</h1>
  <p class="page-subtitle">
    Pick a ready-made routine and mark it as completed when you finish.
  </p>

  <section class="card">
    <div class="card-header">
      <h2 class="card-title">Filters</h2>
      <span class="badge">Browse</span>
    </div>
    <div class="card-body">
      <div class="form-row">
        <div class="field">
          <label for="filter-difficulty">Difficulty</label>
          <select id="filter-difficulty">
            <option value="all">All</option>
            <option value="beginner">Beginner</option>
            <option value="intermediate">Intermediate</option>
            <option value="advanced">Advanced</option>
          </select>
        </div>
        <div class="field">
          <label for="filter-equipment">Equipment</label>
          <select id="filter-equipment">
            <option value="all">All</option>
            <option value="bodyweight">Bodyweight</option>
            <option value="dumbbells">Dumbbells</option>
            <option value="barbell">Barbell</option>
            <option value="kettlebell">Kettlebell</option>
          </select>
        </div>
      </div>
      <div class="status-text" id="workout-count"></div>
    </div>
  </section>

  <section class="grid" id="workout-list"></section>
</main>

<script type="module">
  import { recordWorkoutCompleted } from "./assets/js/storage.js";

  const workouts = [
    {
      id: "fb-quick",
      name: "Full Body Quick Burner",
      difficulty: "beginner",
      equipment: "bodyweight",
      duration: "20 min",
      focus: "Full body",
      description: "Simple full-body circuit with basic movements.",
      details: [
        "Jumping jacks – 3 x 30 sec",
        "Bodyweight squats – 3 x 12",
        "Knee push-ups – 3 x 10",
        "Glute bridges – 3 x 12",
        "Plank – 3 x 20 sec"
      ]
    },
    {
      id: "upper-dumbbell",
      name: "Upper Body Dumbbell Strength",
      difficulty: "intermediate",
      equipment: "dumbbells",
      duration: "35–40 min",
      focus: "Upper body",
      description: "Classic push and pull with dumbbells.",
      details: [
        "Dumbbell bench press – 4 x 8–10",
        "One-arm dumbbell row – 4 x 10 / side",
        "Dumbbell shoulder press – 3 x 10",
        "Dumbbell bicep curls – 3 x 12",
        "Overhead triceps extension – 3 x 12"
      ]
    },
    {
      id: "lower-barbell",
      name: "Leg Day Barbell Basics",
      difficulty: "intermediate",
      equipment: "barbell",
      duration: "40–50 min",
      focus: "Lower body",
      description: "Strength-focused barbell leg session.",
      details: [
        "Back squats – 4 x 6–8",
        "Romanian deadlifts – 4 x 8",
        "Walking lunges – 3 x 12 steps",
        "Calf raises – 3 x 15",
        "Plank – 3 x 30 sec"
      ]
    },
    {
      id: "hiit-kb",
      name: "Kettlebell HIIT",
      difficulty: "advanced",
      equipment: "kettlebell",
      duration: "25–30 min",
      focus: "Cardio + strength",
      description: "High intensity rounds using one kettlebell.",
      details: [
        "KB swings – 4 x 20 sec on / 20 sec off",
        "Goblet squats – 4 x 12",
        "KB clean & press – 3 x 8 / side",
        "KB rows – 3 x 10 / side",
        "Mountain climbers – 3 x 30 sec"
      ]
    }
  ];

  const listEl = document.getElementById("workout-list");
  const diffFilter = document.getElementById("filter-difficulty");
  const equipFilter = document.getElementById("filter-equipment");
  const countEl = document.getElementById("workout-count");

  function renderWorkouts() {
    const diff = diffFilter.value;
    const equip = equipFilter.value;

    listEl.innerHTML = "";

    const filtered = workouts.filter((w) => {
      const matchesDiff = diff === "all" || w.difficulty === diff;
      const matchesEquip = equip === "all" || w.equipment === equip;
      return matchesDiff && matchesEquip;
    });

    filtered.forEach((w) => {
      const card = document.createElement("article");
      card.className = "card";
      card.innerHTML = `
        <div class="card-header">
          <h2 class="card-title">${w.name}</h2>
          <span class="badge">${w.difficulty} • ${w.equipment}</span>
        </div>
        <div class="card-body">
          <p><strong>Focus:</strong> ${w.focus}</p>
          <p><strong>Duration:</strong> ${w.duration}</p>
          <p>${w.description}</p>
          <ul style="margin: 0.5rem 0 0 1.1rem; padding: 0;">
            ${w.details.map((d) => `<li>${d}</li>`).join("")}
          </ul>
          <div class="btn-row">
            <button class="btn btn-primary" data-complete="${w.id}">Mark as completed</button>
          </div>
        </div>
      `;
      listEl.appendChild(card);
    });

    countEl.textContent = `${filtered.length} workout(s) shown`;
  }

  diffFilter.addEventListener("change", renderWorkouts);
  equipFilter.addEventListener("change", renderWorkouts);

  listEl.addEventListener("click", (e) => {
    const btn = e.target.closest("button[data-complete]");
    if (!btn) return;

    btn.disabled = true;
    btn.textContent = "Completed ✔";
    recordWorkoutCompleted();
  });

  renderWorkouts();
</script>
</body>
</html>